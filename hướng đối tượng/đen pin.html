<!DOCTYPE html>
<html lang="en">
  <body>
      <img id="myImage" onclick="OnOffLight()" src="pic_bulbon.gif" width="100" height="180">
      <script type="text/javascript">
          class Battery {
              constructor(_enegry) {
                  this.enegry = _enegry;
              }

              decreaseEnegry() {
                  this.enegry -= 1;
                  alert(this.enegry);
              }
          }

          class FlashLamp {
              constructor(_status, _battery) {
                  this.status = _status;
                  this.battery = _battery
              }

              turnOn() {
                  this.status = true;
              }

              turnOff() {
                  this.status = false;
              }

              light() {

                  if(this.status){
                      document.getElementById('myImage').src = 'pic_bulbon.gif';
                  } else {
                      document.getElementById('myImage').src = 'pic_bulboff.gif';
                  }
              }
          }

          var myBattery = new Battery(20);
          var myFlashLamp = new FlashLamp(true, myBattery);

          function OnOffLight() {
              if(myFlashLamp.status) {
                  myFlashLamp.turnOff();
                  myFlashLamp.light();
              } else {
                  if(myFlashLamp.battery.enegry > 0) {
                      myFlashLamp.turnOn();
                      myFlashLamp.light();
                      myFlashLamp.battery.decreaseEnegry();
                  } else {
                      alert("Đèn hết pin");
                  }
              }
          }

      </script>
  </body>
</html>
</html